{% load filters %}
{% for i in hashtags %}
    <div class="lk-favourites-item item-loctations">
                        <div data-slide="slide{{ i.pk }}" class="story location-one">
                            <div class="story-items">
                                {% for v in img %}
                                    {% if i.pk == v.note.pk %}
                                        <div class="story-item">
                                <img src="{% if v.image %}{{ v.image.url }}{% endif %}" alt="">
                                  <a class="story-item__top" href="{% url 'location_detail' i.pk %}">
                                      <img class="story-item__top-img" src="{% if i.icon %}{{ i.icon.url }}{% endif %}" alt="">
                                      <div class="story-item__top-text">
                                          <h3 class="name-title">{{ i.title }}</h3>
                                          <p class="name-tag">{{ i.subtitle }}</p>
                                      </div>
                                  </a>
                                  <div class="story-item__bottom">
                                      <div class="tag-stroke">
                                          {% for q in i.hashtag.all %}
                                              <button class="stroke-item">{{ q.title }}</button>
                                          {% endfor %}
                                      </div>
                                      {% if request.user.is_authenticated and request.user.status != 'free' %}
                                      <button class="btn-map" onclick="open_maps({{ i.latitude }}, {{ i.longitude }})">
                                          <div class="btn-map__wrap">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                  <path d="M15.2732 20.8618L8.77708 18.5695L4.35018 20.3194C4.05917 20.4669 3.78225 20.457 3.51943 20.2896C3.2566 20.1223 3.12518 19.8714 3.12518 19.5368V5.78685C3.12518 5.57273 3.18224 5.38298 3.29636 5.21759C3.41046 5.05221 3.56622 4.93427 3.76366 4.86377L8.77708 3.11377L15.2732 5.38107L19.6751 3.6407C19.9495 3.50351 20.2222 3.51537 20.4934 3.67627C20.7646 3.83717 20.9001 4.08172 20.9001 4.40992V18.3137C20.9001 18.5073 20.8341 18.6733 20.7021 18.8118C20.57 18.9502 20.427 19.0496 20.2732 19.1099L15.2732 20.8618ZM14.4502 19.0483V6.57337L9.57516 4.89259V17.3926L14.4502 19.0483ZM15.9098 19.0483L19.4405 17.8945V5.21952L15.9098 6.57337V19.0483ZM4.58478 18.731L8.11556 17.3926V4.89259L4.58478 6.06567V18.731Z" fill="white"/>
                                              </svg>
                                              <div class="street-name">{{ i.addresses }}</div>
                                          </div>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                              <path d="M5.73414 11.8168C5.57859 11.6502 5.50081 11.464 5.50081 11.2585C5.50081 11.0529 5.57859 10.8779 5.73414 10.7335L8.46747 7.98349L5.71747 5.21682C5.56192 5.08349 5.48692 4.90571 5.49247 4.68349C5.49803 4.46127 5.57859 4.27793 5.73414 4.13349C5.87859 3.97793 6.05359 3.90293 6.25914 3.90849C6.4647 3.91405 6.6397 3.98905 6.78414 4.13349L10.1008 7.45016C10.1675 7.51682 10.223 7.59738 10.2675 7.69182C10.3119 7.78627 10.3341 7.88349 10.3341 7.98349C10.3341 8.0946 10.3119 8.1946 10.2675 8.28349C10.223 8.37238 10.1675 8.45016 10.1008 8.51682L6.80081 11.8168C6.65636 11.9613 6.47859 12.0307 6.26747 12.0252C6.05636 12.0196 5.87859 11.9502 5.73414 11.8168Z" fill="white"/>
                                          </svg>
                                      </button>
                                          {% else %}
                                          {% if request.user.save_hashtag|check_tag:i.hashtag.all %}
                                          <button class="btn-map" onclick="open_maps({{ i.latitude }}, {{ i.longitude }})">
                                          <div class="btn-map__wrap">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                  <path d="M15.2732 20.8618L8.77708 18.5695L4.35018 20.3194C4.05917 20.4669 3.78225 20.457 3.51943 20.2896C3.2566 20.1223 3.12518 19.8714 3.12518 19.5368V5.78685C3.12518 5.57273 3.18224 5.38298 3.29636 5.21759C3.41046 5.05221 3.56622 4.93427 3.76366 4.86377L8.77708 3.11377L15.2732 5.38107L19.6751 3.6407C19.9495 3.50351 20.2222 3.51537 20.4934 3.67627C20.7646 3.83717 20.9001 4.08172 20.9001 4.40992V18.3137C20.9001 18.5073 20.8341 18.6733 20.7021 18.8118C20.57 18.9502 20.427 19.0496 20.2732 19.1099L15.2732 20.8618ZM14.4502 19.0483V6.57337L9.57516 4.89259V17.3926L14.4502 19.0483ZM15.9098 19.0483L19.4405 17.8945V5.21952L15.9098 6.57337V19.0483ZM4.58478 18.731L8.11556 17.3926V4.89259L4.58478 6.06567V18.731Z" fill="white"/>
                                              </svg>
                                              <div class="street-name">{{ i.addresses }}</div>
                                          </div>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                              <path d="M5.73414 11.8168C5.57859 11.6502 5.50081 11.464 5.50081 11.2585C5.50081 11.0529 5.57859 10.8779 5.73414 10.7335L8.46747 7.98349L5.71747 5.21682C5.56192 5.08349 5.48692 4.90571 5.49247 4.68349C5.49803 4.46127 5.57859 4.27793 5.73414 4.13349C5.87859 3.97793 6.05359 3.90293 6.25914 3.90849C6.4647 3.91405 6.6397 3.98905 6.78414 4.13349L10.1008 7.45016C10.1675 7.51682 10.223 7.59738 10.2675 7.69182C10.3119 7.78627 10.3341 7.88349 10.3341 7.98349C10.3341 8.0946 10.3119 8.1946 10.2675 8.28349C10.223 8.37238 10.1675 8.45016 10.1008 8.51682L6.80081 11.8168C6.65636 11.9613 6.47859 12.0307 6.26747 12.0252C6.05636 12.0196 5.87859 11.9502 5.73414 11.8168Z" fill="white"/>
                                          </svg>
                                      </button>
                                          {% else %}
                                          <button class="btn-map" {% if request.user.status != 'free' or request.user.save_hashtag != 'None' %}{% else %}onclick='$("#free_modal_3").css("display", "flex");'{% endif %} >
                                          <div class="btn-map__wrap">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                  <path d="M15.2732 20.8618L8.77708 18.5695L4.35018 20.3194C4.05917 20.4669 3.78225 20.457 3.51943 20.2896C3.2566 20.1223 3.12518 19.8714 3.12518 19.5368V5.78685C3.12518 5.57273 3.18224 5.38298 3.29636 5.21759C3.41046 5.05221 3.56622 4.93427 3.76366 4.86377L8.77708 3.11377L15.2732 5.38107L19.6751 3.6407C19.9495 3.50351 20.2222 3.51537 20.4934 3.67627C20.7646 3.83717 20.9001 4.08172 20.9001 4.40992V18.3137C20.9001 18.5073 20.8341 18.6733 20.7021 18.8118C20.57 18.9502 20.427 19.0496 20.2732 19.1099L15.2732 20.8618ZM14.4502 19.0483V6.57337L9.57516 4.89259V17.3926L14.4502 19.0483ZM15.9098 19.0483L19.4405 17.8945V5.21952L15.9098 6.57337V19.0483ZM4.58478 18.731L8.11556 17.3926V4.89259L4.58478 6.06567V18.731Z" fill="white"/>
                                              </svg>
                                              <div class="street-name"></div>
                                          </div>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                              <path d="M5.73414 11.8168C5.57859 11.6502 5.50081 11.464 5.50081 11.2585C5.50081 11.0529 5.57859 10.8779 5.73414 10.7335L8.46747 7.98349L5.71747 5.21682C5.56192 5.08349 5.48692 4.90571 5.49247 4.68349C5.49803 4.46127 5.57859 4.27793 5.73414 4.13349C5.87859 3.97793 6.05359 3.90293 6.25914 3.90849C6.4647 3.91405 6.6397 3.98905 6.78414 4.13349L10.1008 7.45016C10.1675 7.51682 10.223 7.59738 10.2675 7.69182C10.3119 7.78627 10.3341 7.88349 10.3341 7.98349C10.3341 8.0946 10.3119 8.1946 10.2675 8.28349C10.223 8.37238 10.1675 8.45016 10.1008 8.51682L6.80081 11.8168C6.65636 11.9613 6.47859 12.0307 6.26747 12.0252C6.05636 12.0196 5.87859 11.9502 5.73414 11.8168Z" fill="white"/>
                                          </svg>
                                      </button>
                                          {% endif %}
                                      {% endif %}
                                      <div class="story-item__bottom-btns">
                                          <a class="share" {% if request.user.status != 'free' or request.user.save_hashtag != 'None' %}href="{% url 'location_detail' i.pk %}"{% else %} onclick='$("#free_modal_1").css("display", "flex");'{% endif %}>
                                          <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                              <path d="M0.601212 12.7252C0.367879 12.4752 0.251212 12.1961 0.251212 11.8877C0.251212 11.5794 0.367879 11.3169 0.601212 11.1002L4.70121 6.97524L0.576212 2.82524C0.342879 2.62524 0.230379 2.35857 0.238712 2.02524C0.247046 1.6919 0.367879 1.4169 0.601212 1.20024C0.817879 0.966902 1.08038 0.854402 1.38871 0.862736C1.69705 0.871069 1.95955 0.983569 2.17621 1.20024L7.15121 6.17524C7.25121 6.27524 7.33455 6.39607 7.40121 6.53774C7.46788 6.6794 7.50121 6.82524 7.50121 6.97524C7.50121 7.1419 7.46788 7.2919 7.40121 7.42524C7.33455 7.55857 7.25121 7.67524 7.15121 7.77524L2.20121 12.7252C1.98455 12.9419 1.71788 13.0461 1.40121 13.0377C1.08455 13.0294 0.817879 12.9252 0.601212 12.7252Z" fill="black"/>
                                          </svg>
                                      </a>
                                      {% if i.pk in wishlist %}
                                              <button class="like" onclick="wishlist(this, {{ i.pk }})" data-wish="delete">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                      <g opacity="0.9">
                                                          <path d="M12 20.3249C11.7667 20.3249 11.5292 20.2832 11.2875 20.1999C11.0458 20.1166 10.8333 19.9832 10.65 19.7999L8.925 18.2249C7.15833 16.6082 5.5625 15.0041 4.1375 13.4124C2.7125 11.8207 2 10.0666 2 8.1499C2 6.58324 2.525 5.2749 3.575 4.2249C4.625 3.1749 5.93333 2.6499 7.5 2.6499C8.38333 2.6499 9.21667 2.8374 10 3.2124C10.7833 3.5874 11.45 4.0999 12 4.7499C12.55 4.0999 13.2167 3.5874 14 3.2124C14.7833 2.8374 15.6167 2.6499 16.5 2.6499C18.0667 2.6499 19.375 3.1749 20.425 4.2249C21.475 5.2749 22 6.58324 22 8.1499C22 10.0666 21.2917 11.8249 19.875 13.4249C18.4583 15.0249 16.85 16.6332 15.05 18.2499L13.35 19.7999C13.1667 19.9832 12.9542 20.1166 12.7125 20.1999C12.4708 20.2832 12.2333 20.3249 12 20.3249Z" fill="#FF5D73"/>
                                                      </g>
                                                  </svg>
                                              </button>
                                          {% else %}
                                              <button class="like" onclick="wishlist(this, {{ i.pk }});" data-wish="add">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                      <path d="M11.9998 20.7617L11.0056 19.8386C9.22104 18.1815 7.75214 16.7685 6.59892 15.5996C5.44571 14.4307 4.53449 13.3979 3.86527 12.5011C3.19604 11.6043 2.7345 10.7929 2.48065 10.0668C2.22682 9.3407 2.0999 8.61272 2.0999 7.88287C2.0999 6.42767 2.6016 5.2001 3.605 4.20015C4.6084 3.20018 5.83746 2.7002 7.29217 2.7002C8.17294 2.7002 9.01941 2.92231 9.83157 3.36655C10.6438 3.81078 11.3665 4.46367 11.9998 5.32522C12.6909 4.44317 13.4311 3.78515 14.2206 3.35117C15.01 2.91719 15.839 2.7002 16.7075 2.7002C18.1622 2.7002 19.3913 3.20018 20.3947 4.20015C21.3981 5.2001 21.8998 6.42767 21.8998 7.88287C21.8998 8.61272 21.7729 9.3407 21.519 10.0668C21.2652 10.7929 20.804 11.6036 20.1355 12.499C19.467 13.3945 18.5558 14.4273 17.4019 15.5975C16.2479 16.7678 14.7787 18.1815 12.9941 19.8386L11.9998 20.7617ZM11.9998 18.8078C13.6785 17.2698 15.0628 15.9533 16.1529 14.8583C17.2429 13.7634 18.104 12.8043 18.7362 11.9811C19.3684 11.1579 19.8104 10.4251 20.0623 9.7828C20.3143 9.14043 20.4402 8.50613 20.4402 7.8799C20.4402 6.81393 20.0893 5.92742 19.3874 5.22037C18.6854 4.51332 17.794 4.1598 16.7131 4.1598C15.8775 4.1598 15.0981 4.41845 14.3749 4.93575C13.6518 5.45306 13.0652 6.16749 12.6152 7.07902H11.3691C10.9229 6.17774 10.3342 5.46588 9.60282 4.94345C8.87147 4.42101 8.09938 4.1598 7.28655 4.1598C6.21208 4.1598 5.32229 4.51094 4.61717 5.21322C3.91204 5.91552 3.55947 6.8091 3.55947 7.89395C3.55947 8.51481 3.68595 9.14812 3.9389 9.79387C4.19185 10.4396 4.6364 11.172 5.27255 11.9909C5.9087 12.8099 6.76877 13.7681 7.85275 14.8655C8.93672 15.963 10.3191 17.2771 11.9998 18.8078Z" fill="white"/>
                                                  </svg>
                                              </button>
                                          {% endif %}
                                      </div>
                                  </div>
                              </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <nav class="story-nav">
                              <div class="story-thumb"></div>
                              <button class="story-prev">Previous</button>
                              <button class="story-next">Next</button>
                            </nav>
                          </div>
                    </div>
{% endfor %}