{% load static %}
{% load filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Главная</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static "assets/css/style.css" %}">
    <script src="https://maps.api.2gis.ru/2.0/loader.js?pkg=full"></script>
</head>
<body>
    <div class="blur"></div>
    <header class="white lk-container">
        <div class="header container">
            <button class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="logo-geo">
                <a class="logo" href="/"><img src="{% static 'assets/images/logo.png' %}"></a>
                <button onclick="change_city_location(this)">
                    <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.9938 22C11.8146 22 11.6375 21.9708 11.4625 21.9125C11.2875 21.8542 11.1333 21.7583 11 21.625C10.3 20.9917 9.54167 20.2625 8.725 19.4375C7.90833 18.6125 7.15 17.725 6.45 16.775C5.75 15.825 5.16667 14.8333 4.7 13.8C4.23333 12.7667 4 11.7333 4 10.7C4 8.2 4.80417 6.20833 6.4125 4.725C8.02083 3.24167 9.88333 2.5 12 2.5C14.1167 2.5 15.9792 3.24167 17.5875 4.725C19.1958 6.20833 20 8.2 20 10.7C20 11.7333 19.7667 12.7667 19.3 13.8C18.8333 14.8333 18.25 15.825 17.55 16.775C16.85 17.725 16.0917 18.6125 15.275 19.4375C14.4583 20.2625 13.7 20.9917 13 21.625C12.8667 21.7583 12.7104 21.8542 12.5312 21.9125C12.3521 21.9708 12.1729 22 11.9938 22ZM12.0022 12.25C12.4841 12.25 12.8958 12.0784 13.2375 11.7353C13.5792 11.3921 13.75 10.9796 13.75 10.4978C13.75 10.0159 13.5784 9.60417 13.2353 9.2625C12.8921 8.92083 12.4796 8.75 11.9978 8.75C11.5159 8.75 11.1042 8.92158 10.7625 9.26472C10.4208 9.60786 10.25 10.0204 10.25 10.5022C10.25 10.9841 10.4216 11.3958 10.7647 11.7375C11.1079 12.0792 11.5204 12.25 12.0022 12.25Z" fill="#383838"/>
                    </svg>
                    <span>{{ request.user.city }}</span>
                </button>
            </div>
            <nav>
                <li><a class="nav-link" href="/#about">О проекте</a></li>
                <li><a class="nav-link" href="/#plans">Тарифы</a></li>
                {% if user.is_authenticated  %}
                <li><a class="nav-link" href="/location">Локации</a></li>
                {% endif %}
                <li><a class="nav-link" href="/#reviews">Отзывы</a></li>
                <li><a class="nav-link" href="/#contacts">Контакты</a></li>
            </nav>
            <div class="lk">
                {% if user.is_authenticated  %}
                <a href="/accounts">
                    <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.39935 23.9993C8.79935 23.1105 10.1827 22.4382 11.5493 21.9827C12.916 21.5271 14.3993 21.2994 15.9993 21.2994C17.5993 21.2994 19.0882 21.5271 20.466 21.9827C21.8438 22.4382 23.2327 23.1105 24.6327 23.9993C25.6105 22.7994 26.3049 21.5882 26.716 20.366C27.1271 19.1438 27.3327 17.8549 27.3327 16.4993C27.3327 13.2771 26.2493 10.5827 24.0827 8.41602C21.916 6.24935 19.2216 5.16602 15.9993 5.16602C12.7771 5.16602 10.0827 6.24935 7.91602 8.41602C5.74935 10.5827 4.66602 13.2771 4.66602 16.4993C4.66602 17.8549 4.87713 19.1438 5.29935 20.366C5.72157 21.5882 6.42157 22.7994 7.39935 23.9993ZM15.9931 17.4993C14.7084 17.4993 13.6271 17.0584 12.7493 16.1765C11.8716 15.2946 11.4327 14.2112 11.4327 12.9265C11.4327 11.6417 11.8736 10.5605 12.7555 9.68268C13.6375 8.8049 14.7208 8.36602 16.0055 8.36602C17.2903 8.36602 18.3716 8.80697 19.2493 9.68888C20.1271 10.5708 20.566 11.6541 20.566 12.9389C20.566 14.2236 20.1251 15.3049 19.2432 16.1827C18.3612 17.0605 17.2779 17.4993 15.9931 17.4993ZM15.9858 29.8327C14.1382 29.8327 12.4018 29.4827 10.7767 28.7827C9.15159 28.0827 7.73798 27.1271 6.53585 25.916C5.33374 24.7049 4.38824 23.29 3.69935 21.6713C3.01046 20.0527 2.66602 18.3231 2.66602 16.4827C2.66602 14.6423 3.01602 12.9127 3.71602 11.294C4.41602 9.67536 5.37157 8.26602 6.58268 7.06602C7.79379 5.86602 9.20869 4.91602 10.8274 4.21602C12.446 3.51602 14.1756 3.16602 16.016 3.16602C17.8564 3.16602 19.586 3.51602 21.2046 4.21602C22.8233 4.91602 24.2327 5.86602 25.4327 7.06602C26.6327 8.26602 27.5827 9.67713 28.2827 11.2993C28.9827 12.9216 29.3327 14.6519 29.3327 16.4905C29.3327 18.329 28.9827 20.0568 28.2827 21.6738C27.5827 23.2908 26.6327 24.7049 25.4327 25.916C24.2327 27.1271 22.8201 28.0827 21.195 28.7827C19.57 29.4827 17.8336 29.8327 15.9858 29.8327Z" fill="#383838"/>
                    </svg>
                </a>
                {% else %}
                <button data-bs-toggle="modal" data-bs-target="#loginModal">
                    <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.39935 23.9993C8.79935 23.1105 10.1827 22.4382 11.5493 21.9827C12.916 21.5271 14.3993 21.2994 15.9993 21.2994C17.5993 21.2994 19.0882 21.5271 20.466 21.9827C21.8438 22.4382 23.2327 23.1105 24.6327 23.9993C25.6105 22.7994 26.3049 21.5882 26.716 20.366C27.1271 19.1438 27.3327 17.8549 27.3327 16.4993C27.3327 13.2771 26.2493 10.5827 24.0827 8.41602C21.916 6.24935 19.2216 5.16602 15.9993 5.16602C12.7771 5.16602 10.0827 6.24935 7.91602 8.41602C5.74935 10.5827 4.66602 13.2771 4.66602 16.4993C4.66602 17.8549 4.87713 19.1438 5.29935 20.366C5.72157 21.5882 6.42157 22.7994 7.39935 23.9993ZM15.9931 17.4993C14.7084 17.4993 13.6271 17.0584 12.7493 16.1765C11.8716 15.2946 11.4327 14.2112 11.4327 12.9265C11.4327 11.6417 11.8736 10.5605 12.7555 9.68268C13.6375 8.8049 14.7208 8.36602 16.0055 8.36602C17.2903 8.36602 18.3716 8.80697 19.2493 9.68888C20.1271 10.5708 20.566 11.6541 20.566 12.9389C20.566 14.2236 20.1251 15.3049 19.2432 16.1827C18.3612 17.0605 17.2779 17.4993 15.9931 17.4993ZM15.9858 29.8327C14.1382 29.8327 12.4018 29.4827 10.7767 28.7827C9.15159 28.0827 7.73798 27.1271 6.53585 25.916C5.33374 24.7049 4.38824 23.29 3.69935 21.6713C3.01046 20.0527 2.66602 18.3231 2.66602 16.4827C2.66602 14.6423 3.01602 12.9127 3.71602 11.294C4.41602 9.67536 5.37157 8.26602 6.58268 7.06602C7.79379 5.86602 9.20869 4.91602 10.8274 4.21602C12.446 3.51602 14.1756 3.16602 16.016 3.16602C17.8564 3.16602 19.586 3.51602 21.2046 4.21602C22.8233 4.91602 24.2327 5.86602 25.4327 7.06602C26.6327 8.26602 27.5827 9.67713 28.2827 11.2993C28.9827 12.9216 29.3327 14.6519 29.3327 16.4905C29.3327 18.329 28.9827 20.0568 28.2827 21.6738C27.5827 23.2908 26.6327 24.7049 25.4327 25.916C24.2327 27.1271 22.8201 28.0827 21.195 28.7827C19.57 29.4827 17.8336 29.8327 15.9858 29.8327Z" fill="#383838"/>
                    </svg>
                </button>
                {% endif %}
                {% if user.is_authenticated  %}
                {% else %}
                <button class="header-button" data-bs-toggle="modal" data-bs-target="#registerModal">
                    Начать <span>бесплатно</span>
                </button>
                {% endif %}
            </div>
            <div class="nav-menu__container">
                <nav>
                    <li><a class="nav-link" href="/#about">О проекте</a></li>
                <li><a class="nav-link" href="/#plans">Тарифы</a></li>
                    {% if user.is_authenticated  %}
                <li><a class="nav-link" href="/location">Локации</a></li>
                {% endif %}
                <li><a class="nav-link" href="/#reviews">Отзывы</a></li>
                <li><a class="nav-link" href="/#contacts">Контакты</a></li>
                </nav>
                <div class="lk">
                    {% if user.is_authenticated  %}
                <a href="{% url 'lk' %}">
                    <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.39935 23.9993C8.79935 23.1105 10.1827 22.4382 11.5493 21.9827C12.916 21.5271 14.3993 21.2994 15.9993 21.2994C17.5993 21.2994 19.0882 21.5271 20.466 21.9827C21.8438 22.4382 23.2327 23.1105 24.6327 23.9993C25.6105 22.7994 26.3049 21.5882 26.716 20.366C27.1271 19.1438 27.3327 17.8549 27.3327 16.4993C27.3327 13.2771 26.2493 10.5827 24.0827 8.41602C21.916 6.24935 19.2216 5.16602 15.9993 5.16602C12.7771 5.16602 10.0827 6.24935 7.91602 8.41602C5.74935 10.5827 4.66602 13.2771 4.66602 16.4993C4.66602 17.8549 4.87713 19.1438 5.29935 20.366C5.72157 21.5882 6.42157 22.7994 7.39935 23.9993ZM15.9931 17.4993C14.7084 17.4993 13.6271 17.0584 12.7493 16.1765C11.8716 15.2946 11.4327 14.2112 11.4327 12.9265C11.4327 11.6417 11.8736 10.5605 12.7555 9.68268C13.6375 8.8049 14.7208 8.36602 16.0055 8.36602C17.2903 8.36602 18.3716 8.80697 19.2493 9.68888C20.1271 10.5708 20.566 11.6541 20.566 12.9389C20.566 14.2236 20.1251 15.3049 19.2432 16.1827C18.3612 17.0605 17.2779 17.4993 15.9931 17.4993ZM15.9858 29.8327C14.1382 29.8327 12.4018 29.4827 10.7767 28.7827C9.15159 28.0827 7.73798 27.1271 6.53585 25.916C5.33374 24.7049 4.38824 23.29 3.69935 21.6713C3.01046 20.0527 2.66602 18.3231 2.66602 16.4827C2.66602 14.6423 3.01602 12.9127 3.71602 11.294C4.41602 9.67536 5.37157 8.26602 6.58268 7.06602C7.79379 5.86602 9.20869 4.91602 10.8274 4.21602C12.446 3.51602 14.1756 3.16602 16.016 3.16602C17.8564 3.16602 19.586 3.51602 21.2046 4.21602C22.8233 4.91602 24.2327 5.86602 25.4327 7.06602C26.6327 8.26602 27.5827 9.67713 28.2827 11.2993C28.9827 12.9216 29.3327 14.6519 29.3327 16.4905C29.3327 18.329 28.9827 20.0568 28.2827 21.6738C27.5827 23.2908 26.6327 24.7049 25.4327 25.916C24.2327 27.1271 22.8201 28.0827 21.195 28.7827C19.57 29.4827 17.8336 29.8327 15.9858 29.8327Z" fill="#383838"/>
                    </svg>
                </a>
                {% else %}
                {% endif %}
                    {% if user.is_authenticated  %}
                    {% else %}
                    <button class="header-button" data-bs-toggle="modal" data-bs-target="#registerModal">
                    Начать <span>бесплатно</span>
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>
    <section class="location">
        <div class="location-top container">
            <h1 class="location-title">Локации</h1>
        <div class="map-locate" onclick="change_city_location(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M11.9938 21.5C11.8146 21.5 11.6375 21.4708 11.4625 21.4125C11.2875 21.3542 11.1333 21.2583 11 21.125C10.3 20.4917 9.54167 19.7625 8.725 18.9375C7.90833 18.1125 7.15 17.225 6.45 16.275C5.75 15.325 5.16667 14.3333 4.7 13.3C4.23333 12.2667 4 11.2333 4 10.2C4 7.7 4.80417 5.70833 6.4125 4.225C8.02083 2.74167 9.88333 2 12 2C14.1167 2 15.9792 2.74167 17.5875 4.225C19.1958 5.70833 20 7.7 20 10.2C20 11.2333 19.7667 12.2667 19.3 13.3C18.8333 14.3333 18.25 15.325 17.55 16.275C16.85 17.225 16.0917 18.1125 15.275 18.9375C14.4583 19.7625 13.7 20.4917 13 21.125C12.8667 21.2583 12.7104 21.3542 12.5312 21.4125C12.3521 21.4708 12.1729 21.5 11.9938 21.5ZM12.0022 11.75C12.4841 11.75 12.8958 11.5784 13.2375 11.2353C13.5792 10.8921 13.75 10.4796 13.75 9.99778C13.75 9.51593 13.5784 9.10417 13.2353 8.7625C12.8921 8.42083 12.4796 8.25 11.9978 8.25C11.5159 8.25 11.1042 8.42158 10.7625 8.76472C10.4208 9.10786 10.25 9.52036 10.25 10.0022C10.25 10.4841 10.4216 10.8958 10.7647 11.2375C11.1079 11.5792 11.5204 11.75 12.0022 11.75Z" fill="#383838"/>
                    </svg>
                    <span>{{ request.user.city }}</span>
                </div>
            <div class="location-top__filter">
                <select class="city-select" name="" id="city-select">
                    <option value="Москва" {% if request.user.city == 'Москва' %}selected{% endif %}>Москва</option>
                    <option value="Екатеринбург" {% if request.user.city == 'Екатеринбург' %}selected{% endif %}>Екатеринбург</option>
                </select>
                <button class="tag-color">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3.7423 18.9597C3.53155 18.9597 3.35515 18.8866 3.2131 18.7406C3.07103 18.5945 3 18.4211 3 18.2204C3 18.0197 3.07103 17.8494 3.2131 17.7097C3.35515 17.5699 3.53155 17.5001 3.7423 17.5001H8.35958C8.55406 17.5001 8.72223 17.5716 8.8641 17.7146C9.00595 17.8576 9.07688 18.0295 9.07688 18.2302C9.07688 18.4309 9.00595 18.6026 8.8641 18.7454C8.72223 18.8883 8.55406 18.9597 8.35958 18.9597H3.7423ZM3.7423 6.50007C3.53155 6.50007 3.35515 6.42703 3.2131 6.28095C3.07103 6.13488 3 5.96149 3 5.76077C3 5.56006 3.07103 5.38983 3.2131 5.2501C3.35515 5.11035 3.53155 5.04047 3.7423 5.04047H12.2961C12.4977 5.04047 12.6718 5.11197 12.8185 5.25497C12.9651 5.39797 13.0384 5.56983 13.0384 5.77055C13.0384 5.97126 12.9651 6.14303 12.8185 6.28585C12.6718 6.42867 12.4977 6.50007 12.2961 6.50007H3.7423ZM11.6911 21C11.4903 21 11.3186 20.9291 11.1758 20.7873C11.033 20.6454 10.9616 20.4772 10.9616 20.2827V16.1616C10.9616 15.9663 11.0346 15.7937 11.1807 15.644C11.3267 15.4942 11.5001 15.4193 11.7008 15.4193C11.9015 15.4193 12.0718 15.4942 12.2115 15.644C12.3513 15.7937 12.4211 15.9663 12.4211 16.1616V17.5001H20.2577C20.4592 17.5001 20.6333 17.5716 20.78 17.7146C20.9266 17.8576 21 18.0295 21 18.2302C21 18.4309 20.9266 18.6026 20.78 18.7454C20.6333 18.8883 20.4592 18.9597 20.2577 18.9597H12.4211V20.2827C12.4211 20.4772 12.3496 20.6454 12.2066 20.7873C12.0636 20.9291 11.8918 21 11.6911 21ZM8.3468 14.7827C8.14608 14.7827 7.97432 14.7117 7.8315 14.5696C7.6887 14.4276 7.6173 14.2512 7.6173 14.0404V12.7174H3.7423C3.53155 12.7174 3.35515 12.646 3.2131 12.5033C3.07103 12.3606 3 12.1914 3 11.9956C3 11.7999 3.07103 11.628 3.2131 11.4799C3.35515 11.3318 3.53155 11.2578 3.7423 11.2578H7.6173V9.90392C7.6173 9.70944 7.69033 9.54127 7.8364 9.39942C7.98247 9.25756 8.15586 9.18662 8.35658 9.18662C8.55729 9.18662 8.72752 9.25756 8.86728 9.39942C9.00701 9.54127 9.07688 9.70944 9.07688 9.90392V14.0404C9.07688 14.2512 9.00538 14.4276 8.86238 14.5696C8.71938 14.7117 8.54752 14.7827 8.3468 14.7827ZM11.7038 12.7174C11.4931 12.7174 11.3167 12.646 11.1746 12.5033C11.0326 12.3606 10.9616 12.1914 10.9616 11.9956C10.9616 11.7999 11.0326 11.628 11.1746 11.4799C11.3167 11.3318 11.4931 11.2578 11.7038 11.2578H20.2577C20.4592 11.2578 20.6333 11.3316 20.78 11.4791C20.9266 11.6267 21 11.802 21 12.005C21 12.2008 20.9266 12.3685 20.78 12.5081C20.6333 12.6476 20.4592 12.7174 20.2577 12.7174H11.7038ZM15.6355 8.54622C15.4396 8.54622 15.2719 8.47529 15.1324 8.33342C14.9928 8.19157 14.9231 8.02341 14.9231 7.82892V3.7174C14.9231 3.51583 14.9944 3.34172 15.1372 3.19507C15.2799 3.04842 15.4491 2.9751 15.6448 2.9751C15.8406 2.9751 16.0125 3.04842 16.1606 3.19507C16.3086 3.34172 16.3827 3.51583 16.3827 3.7174V5.04047H20.2577C20.4592 5.04047 20.6333 5.11197 20.78 5.25497C20.9266 5.39797 21 5.56983 21 5.77055C21 5.97126 20.9266 6.14303 20.78 6.28585C20.6333 6.42867 20.4592 6.50007 20.2577 6.50007H16.3827V7.82892C16.3827 8.02341 16.3089 8.19157 16.1613 8.33342C16.0137 8.47529 15.8384 8.54622 15.6355 8.54622Z" fill="#383838"/>
                    </svg>
                    <p>Выбрать теги и цвета</p>
                </button>
                <div class="btn-visual active">
                    <button class="btn-maps active">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M14.8 20.825L8.725 18.675L4.25 20.45C3.96667 20.6 3.6875 20.5917 3.4125 20.425C3.1375 20.2583 3 20.0083 3 19.675V5.72501C3 5.50834 3.0625 5.31667 3.1875 5.15001C3.3125 4.98334 3.475 4.85834 3.675 4.77501L8.225 3.17501C8.39167 3.12501 8.55833 3.10001 8.725 3.10001C8.89167 3.10001 9.05833 3.12501 9.225 3.17501L15.3 5.30001L19.75 3.52501C20.0333 3.39167 20.3125 3.40417 20.5875 3.56251C20.8625 3.72084 21 3.96667 21 4.30001V18.425C21 18.6083 20.9375 18.7667 20.8125 18.9C20.6875 19.0333 20.5333 19.1333 20.35 19.2L15.8 20.825C15.6333 20.875 15.4667 20.9 15.3 20.9C15.1333 20.9 14.9667 20.875 14.8 20.825ZM14.45 19.125V6.50001L9.55 4.85001V17.475L14.45 19.125ZM15.95 19.125L19.5 17.95V5.15001L15.95 6.50001V19.125ZM4.5 18.825L8.05 17.475V4.85001L4.5 6.02501V18.825Z" fill="#383838"/>
                        </svg>
                        <p>Показать на карте</p>
                    </button>
                    <button class="btn-list">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M10.1749 19.05C9.9624 19.05 9.78428 18.9777 9.64053 18.8331C9.49678 18.6885 9.4249 18.5094 9.4249 18.2956C9.4249 18.0819 9.49678 17.9042 9.64053 17.7625C9.78428 17.6208 9.9624 17.55 10.1749 17.55H20.2499C20.4624 17.55 20.6405 17.6223 20.7843 17.7669C20.928 17.9115 20.9999 18.0906 20.9999 18.3044C20.9999 18.5181 20.928 18.6958 20.7843 18.8375C20.6405 18.9792 20.4624 19.05 20.2499 19.05H10.1749ZM10.1749 12.75C9.9624 12.75 9.78428 12.6777 9.64053 12.5331C9.49678 12.3885 9.4249 12.2094 9.4249 11.9956C9.4249 11.7819 9.49678 11.6042 9.64053 11.4625C9.78428 11.3208 9.9624 11.25 10.1749 11.25H20.2499C20.4624 11.25 20.6405 11.3223 20.7843 11.4669C20.928 11.6115 20.9999 11.7906 20.9999 12.0044C20.9999 12.2181 20.928 12.3958 20.7843 12.5375C20.6405 12.6792 20.4624 12.75 20.2499 12.75H10.1749ZM10.1749 6.425C9.9624 6.425 9.78428 6.35271 9.64053 6.20813C9.49678 6.06353 9.4249 5.88436 9.4249 5.67063C9.4249 5.45688 9.49678 5.27917 9.64053 5.1375C9.78428 4.99583 9.9624 4.925 10.1749 4.925H20.2499C20.4624 4.925 20.6405 4.99729 20.7843 5.14187C20.928 5.28647 20.9999 5.46564 20.9999 5.67937C20.9999 5.89312 20.928 6.07083 20.7843 6.2125C20.6405 6.35417 20.4624 6.425 20.2499 6.425H10.1749ZM4.7249 19.975C4.2574 19.975 3.85719 19.8167 3.52428 19.5C3.19136 19.1833 3.0249 18.7875 3.0249 18.3125C3.0249 17.8375 3.1874 17.4375 3.5124 17.1125C3.8374 16.7875 4.2374 16.625 4.7124 16.625C5.1874 16.625 5.58324 16.7915 5.8999 17.1244C6.21657 17.4573 6.3749 17.8575 6.3749 18.325C6.3749 18.7788 6.21334 19.1672 5.89023 19.4903C5.56709 19.8134 5.17865 19.975 4.7249 19.975ZM4.7249 13.675C4.2574 13.675 3.85719 13.511 3.52428 13.183C3.19136 12.855 3.0249 12.4606 3.0249 12C3.0249 11.5394 3.19136 11.145 3.52428 10.817C3.85719 10.489 4.2574 10.325 4.7249 10.325C5.17865 10.325 5.56709 10.489 5.89023 10.817C6.21334 11.145 6.3749 11.5394 6.3749 12C6.3749 12.4606 6.21334 12.855 5.89023 13.183C5.56709 13.511 5.17865 13.675 4.7249 13.675ZM4.6999 7.35C4.23929 7.35 3.84496 7.18599 3.51693 6.85797C3.18891 6.52996 3.0249 6.13563 3.0249 5.675C3.0249 5.21437 3.18891 4.82004 3.51693 4.49203C3.84496 4.16401 4.23929 4 4.6999 4C5.16052 4 5.55484 4.16401 5.88288 4.49203C6.21089 4.82004 6.3749 5.21437 6.3749 5.675C6.3749 6.13563 6.21089 6.52996 5.88288 6.85797C5.55484 7.18599 5.16052 7.35 4.6999 7.35Z" fill="#383838"/>
                        </svg>
                        <p>Показать списком</p>
                    </button>
                </div>
            </div>
        </div>
        <div class="location-filter container">
            <div class="line-scroll"></div>
            <div class="location-filter-top">
                <div class="location-filter__title">Фильтры</div>
                <div class="map-locate" onclick="change_city_location(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M11.9938 21.5C11.8146 21.5 11.6375 21.4708 11.4625 21.4125C11.2875 21.3542 11.1333 21.2583 11 21.125C10.3 20.4917 9.54167 19.7625 8.725 18.9375C7.90833 18.1125 7.15 17.225 6.45 16.275C5.75 15.325 5.16667 14.3333 4.7 13.3C4.23333 12.2667 4 11.2333 4 10.2C4 7.7 4.80417 5.70833 6.4125 4.225C8.02083 2.74167 9.88333 2 12 2C14.1167 2 15.9792 2.74167 17.5875 4.225C19.1958 5.70833 20 7.7 20 10.2C20 11.2333 19.7667 12.2667 19.3 13.3C18.8333 14.3333 18.25 15.325 17.55 16.275C16.85 17.225 16.0917 18.1125 15.275 18.9375C14.4583 19.7625 13.7 20.4917 13 21.125C12.8667 21.2583 12.7104 21.3542 12.5312 21.4125C12.3521 21.4708 12.1729 21.5 11.9938 21.5ZM12.0022 11.75C12.4841 11.75 12.8958 11.5784 13.2375 11.2353C13.5792 10.8921 13.75 10.4796 13.75 9.99778C13.75 9.51593 13.5784 9.10417 13.2353 8.7625C12.8921 8.42083 12.4796 8.25 11.9978 8.25C11.5159 8.25 11.1042 8.42158 10.7625 8.76472C10.4208 9.10786 10.25 9.52036 10.25 10.0022C10.25 10.4841 10.4216 10.8958 10.7647 11.2375C11.1079 11.5792 11.5204 11.75 12.0022 11.75Z" fill="#383838"/>
                    </svg>
                    <span>{{ request.user.city }}</span>
                </div>
            </div>
            <div class="loca-bg-bottm">
                <div class="location-filters__tags">
                    <form class="locations-tags" id="locations-tags">
                        {% if request.user.status == 'free' %}
                            {% for i in hashtag %}
                                {% if request.user.save_hashtag == 'None' %}
                                    <input type="checkbox" name="btn_{{ i.pk }}" id="btn_{{ i.pk }}" class="locations-tag check_tags">
                                    <label for="btn_{{ i.pk }}" class="locations-tag">{{ i.title }}</label>
                                {% else %}
                                    {% if request.user.save_hashtag == i.title %}
                                        <input type="checkbox" name="btn_{{ i.pk }}" id="btn_{{ i.pk }}" class="locations-tag check_tags active" disabled checked>
                                        <label for="btn_{{ i.pk }}" class="locations-tag active">{{ i.title }}</label>
                                    {% else %}
                                        <input type="checkbox" name="btn_{{ i.pk }}" id="btn_{{ i.pk }}" class="locations-tag check_tags" disabled>
                                        <label for="btn_{{ i.pk }}" class="locations-tag">{{ i.title }}</label>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            {% for i in hashtag %}
                                <input type="checkbox" name="btn_{{ i.pk }}" id="btn_{{ i.pk }}" class="locations-tag check_tags">
                                <label for="btn_{{ i.pk }}" class="locations-tag">{{ i.title }}</label>
                            {% endfor %}
                        {% endif %}
                    </form>
            </div>
            </div>
            <div class="location-filter__btns">
                <button class="location-filter__btn" onclick='$(".location-filter").removeClass("active");$(".blur").removeClass("active");$("body").css("overflow", "auto");'>Применить</button>
                <button class="location-filter__btn" onclick='$(".location-filter").removeClass("active");$(".blur").removeClass("active");$("body").css("overflow", "auto");'>Отменить</button>
            </div>
        </div>
        <div class="locations-main container">
            <div class="locations-items block">
                <div class="line-scroll"></div>
                <div class="locations-items-title">{{ object_list.count }} локаций</div>
                <div class="locations-items-wrapper" id="locations_block">
                    {% for i in object_list|slice:":9" %}
    <div class="lk-favourites-item item-loctations">
                        <div data-slide="slide{{ i.pk }}" class="story location-one">
                            <div class="story-items">
                                {% for v in img %}
                                    {% if i.pk == v.note.pk %}
                                        <div class="story-item">
                                <img src="{% if v.image %}{{ v.image.url }}{% endif %}" alt="">
                                  <a class="story-item__top" href="{% url 'location_detail' i.pk %}">
                                      <img class="story-item__top-img" src="{% if i.icon %}{{ i.icon.url }}{% endif %}" alt="">
                                      <div class="story-item__top-text">
                                          <h3 class="name-title">{{ i.title }}</h3>
                                          <p class="name-tag">{{ i.subtitle }}</p>
                                      </div>
                                  </a>
                                  <div class="story-item__bottom">
                                      <div class="tag-stroke">
                                          {% for q in i.hashtag.all %}
                                              <button class="stroke-item">{{ q.title }}</button>
                                          {% endfor %}
                                      </div>
                                      {% if request.user.is_authenticated and request.user.status != 'free' %}
                                      <button class="btn-map" onclick="open_maps({{ i.latitude }}, {{ i.longitude }})">
                                          <div class="btn-map__wrap">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                  <path d="M15.2732 20.8618L8.77708 18.5695L4.35018 20.3194C4.05917 20.4669 3.78225 20.457 3.51943 20.2896C3.2566 20.1223 3.12518 19.8714 3.12518 19.5368V5.78685C3.12518 5.57273 3.18224 5.38298 3.29636 5.21759C3.41046 5.05221 3.56622 4.93427 3.76366 4.86377L8.77708 3.11377L15.2732 5.38107L19.6751 3.6407C19.9495 3.50351 20.2222 3.51537 20.4934 3.67627C20.7646 3.83717 20.9001 4.08172 20.9001 4.40992V18.3137C20.9001 18.5073 20.8341 18.6733 20.7021 18.8118C20.57 18.9502 20.427 19.0496 20.2732 19.1099L15.2732 20.8618ZM14.4502 19.0483V6.57337L9.57516 4.89259V17.3926L14.4502 19.0483ZM15.9098 19.0483L19.4405 17.8945V5.21952L15.9098 6.57337V19.0483ZM4.58478 18.731L8.11556 17.3926V4.89259L4.58478 6.06567V18.731Z" fill="white"/>
                                              </svg>
                                              <div class="street-name">{{ i.addresses }}</div>
                                          </div>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                              <path d="M5.73414 11.8168C5.57859 11.6502 5.50081 11.464 5.50081 11.2585C5.50081 11.0529 5.57859 10.8779 5.73414 10.7335L8.46747 7.98349L5.71747 5.21682C5.56192 5.08349 5.48692 4.90571 5.49247 4.68349C5.49803 4.46127 5.57859 4.27793 5.73414 4.13349C5.87859 3.97793 6.05359 3.90293 6.25914 3.90849C6.4647 3.91405 6.6397 3.98905 6.78414 4.13349L10.1008 7.45016C10.1675 7.51682 10.223 7.59738 10.2675 7.69182C10.3119 7.78627 10.3341 7.88349 10.3341 7.98349C10.3341 8.0946 10.3119 8.1946 10.2675 8.28349C10.223 8.37238 10.1675 8.45016 10.1008 8.51682L6.80081 11.8168C6.65636 11.9613 6.47859 12.0307 6.26747 12.0252C6.05636 12.0196 5.87859 11.9502 5.73414 11.8168Z" fill="white"/>
                                          </svg>
                                      </button>
                                          {% else %}
                                          {% if request.user.save_hashtag|check_tag:i.hashtag.all %}
                                          <button class="btn-map" onclick="open_maps({{ i.latitude }}, {{ i.longitude }})">
                                          <div class="btn-map__wrap">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                  <path d="M15.2732 20.8618L8.77708 18.5695L4.35018 20.3194C4.05917 20.4669 3.78225 20.457 3.51943 20.2896C3.2566 20.1223 3.12518 19.8714 3.12518 19.5368V5.78685C3.12518 5.57273 3.18224 5.38298 3.29636 5.21759C3.41046 5.05221 3.56622 4.93427 3.76366 4.86377L8.77708 3.11377L15.2732 5.38107L19.6751 3.6407C19.9495 3.50351 20.2222 3.51537 20.4934 3.67627C20.7646 3.83717 20.9001 4.08172 20.9001 4.40992V18.3137C20.9001 18.5073 20.8341 18.6733 20.7021 18.8118C20.57 18.9502 20.427 19.0496 20.2732 19.1099L15.2732 20.8618ZM14.4502 19.0483V6.57337L9.57516 4.89259V17.3926L14.4502 19.0483ZM15.9098 19.0483L19.4405 17.8945V5.21952L15.9098 6.57337V19.0483ZM4.58478 18.731L8.11556 17.3926V4.89259L4.58478 6.06567V18.731Z" fill="white"/>
                                              </svg>
                                              <div class="street-name">{{ i.addresses }}</div>
                                          </div>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                              <path d="M5.73414 11.8168C5.57859 11.6502 5.50081 11.464 5.50081 11.2585C5.50081 11.0529 5.57859 10.8779 5.73414 10.7335L8.46747 7.98349L5.71747 5.21682C5.56192 5.08349 5.48692 4.90571 5.49247 4.68349C5.49803 4.46127 5.57859 4.27793 5.73414 4.13349C5.87859 3.97793 6.05359 3.90293 6.25914 3.90849C6.4647 3.91405 6.6397 3.98905 6.78414 4.13349L10.1008 7.45016C10.1675 7.51682 10.223 7.59738 10.2675 7.69182C10.3119 7.78627 10.3341 7.88349 10.3341 7.98349C10.3341 8.0946 10.3119 8.1946 10.2675 8.28349C10.223 8.37238 10.1675 8.45016 10.1008 8.51682L6.80081 11.8168C6.65636 11.9613 6.47859 12.0307 6.26747 12.0252C6.05636 12.0196 5.87859 11.9502 5.73414 11.8168Z" fill="white"/>
                                          </svg>
                                      </button>
                                          {% else %}
                                          <button class="btn-map" >
                                          <div class="btn-map__wrap">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                  <path d="M15.2732 20.8618L8.77708 18.5695L4.35018 20.3194C4.05917 20.4669 3.78225 20.457 3.51943 20.2896C3.2566 20.1223 3.12518 19.8714 3.12518 19.5368V5.78685C3.12518 5.57273 3.18224 5.38298 3.29636 5.21759C3.41046 5.05221 3.56622 4.93427 3.76366 4.86377L8.77708 3.11377L15.2732 5.38107L19.6751 3.6407C19.9495 3.50351 20.2222 3.51537 20.4934 3.67627C20.7646 3.83717 20.9001 4.08172 20.9001 4.40992V18.3137C20.9001 18.5073 20.8341 18.6733 20.7021 18.8118C20.57 18.9502 20.427 19.0496 20.2732 19.1099L15.2732 20.8618ZM14.4502 19.0483V6.57337L9.57516 4.89259V17.3926L14.4502 19.0483ZM15.9098 19.0483L19.4405 17.8945V5.21952L15.9098 6.57337V19.0483ZM4.58478 18.731L8.11556 17.3926V4.89259L4.58478 6.06567V18.731Z" fill="white"/>
                                              </svg>
                                              <div class="street-name"></div>
                                          </div>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                              <path d="M5.73414 11.8168C5.57859 11.6502 5.50081 11.464 5.50081 11.2585C5.50081 11.0529 5.57859 10.8779 5.73414 10.7335L8.46747 7.98349L5.71747 5.21682C5.56192 5.08349 5.48692 4.90571 5.49247 4.68349C5.49803 4.46127 5.57859 4.27793 5.73414 4.13349C5.87859 3.97793 6.05359 3.90293 6.25914 3.90849C6.4647 3.91405 6.6397 3.98905 6.78414 4.13349L10.1008 7.45016C10.1675 7.51682 10.223 7.59738 10.2675 7.69182C10.3119 7.78627 10.3341 7.88349 10.3341 7.98349C10.3341 8.0946 10.3119 8.1946 10.2675 8.28349C10.223 8.37238 10.1675 8.45016 10.1008 8.51682L6.80081 11.8168C6.65636 11.9613 6.47859 12.0307 6.26747 12.0252C6.05636 12.0196 5.87859 11.9502 5.73414 11.8168Z" fill="white"/>
                                          </svg>
                                      </button>
                                          {% endif %}
                                      {% endif %}
                                      <div class="story-item__bottom-btns">
                                          <a class="share" href="{% url 'location_detail' i.pk %}">
                                          <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                              <path d="M0.601212 12.7252C0.367879 12.4752 0.251212 12.1961 0.251212 11.8877C0.251212 11.5794 0.367879 11.3169 0.601212 11.1002L4.70121 6.97524L0.576212 2.82524C0.342879 2.62524 0.230379 2.35857 0.238712 2.02524C0.247046 1.6919 0.367879 1.4169 0.601212 1.20024C0.817879 0.966902 1.08038 0.854402 1.38871 0.862736C1.69705 0.871069 1.95955 0.983569 2.17621 1.20024L7.15121 6.17524C7.25121 6.27524 7.33455 6.39607 7.40121 6.53774C7.46788 6.6794 7.50121 6.82524 7.50121 6.97524C7.50121 7.1419 7.46788 7.2919 7.40121 7.42524C7.33455 7.55857 7.25121 7.67524 7.15121 7.77524L2.20121 12.7252C1.98455 12.9419 1.71788 13.0461 1.40121 13.0377C1.08455 13.0294 0.817879 12.9252 0.601212 12.7252Z" fill="black"/>
                                          </svg>
                                      </a>
                                      {% if i.pk in wishlist %}
                                              <button class="like" onclick="wishlist(this, {{ i.pk }})" data-wish="delete">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                      <g opacity="0.9">
                                                          <path d="M12 20.3249C11.7667 20.3249 11.5292 20.2832 11.2875 20.1999C11.0458 20.1166 10.8333 19.9832 10.65 19.7999L8.925 18.2249C7.15833 16.6082 5.5625 15.0041 4.1375 13.4124C2.7125 11.8207 2 10.0666 2 8.1499C2 6.58324 2.525 5.2749 3.575 4.2249C4.625 3.1749 5.93333 2.6499 7.5 2.6499C8.38333 2.6499 9.21667 2.8374 10 3.2124C10.7833 3.5874 11.45 4.0999 12 4.7499C12.55 4.0999 13.2167 3.5874 14 3.2124C14.7833 2.8374 15.6167 2.6499 16.5 2.6499C18.0667 2.6499 19.375 3.1749 20.425 4.2249C21.475 5.2749 22 6.58324 22 8.1499C22 10.0666 21.2917 11.8249 19.875 13.4249C18.4583 15.0249 16.85 16.6332 15.05 18.2499L13.35 19.7999C13.1667 19.9832 12.9542 20.1166 12.7125 20.1999C12.4708 20.2832 12.2333 20.3249 12 20.3249Z" fill="#FF5D73"/>
                                                      </g>
                                                  </svg>
                                              </button>
                                          {% else %}
                                              <button class="like" onclick="wishlist(this, {{ i.pk }});" data-wish="add">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                      <path d="M11.9998 20.7617L11.0056 19.8386C9.22104 18.1815 7.75214 16.7685 6.59892 15.5996C5.44571 14.4307 4.53449 13.3979 3.86527 12.5011C3.19604 11.6043 2.7345 10.7929 2.48065 10.0668C2.22682 9.3407 2.0999 8.61272 2.0999 7.88287C2.0999 6.42767 2.6016 5.2001 3.605 4.20015C4.6084 3.20018 5.83746 2.7002 7.29217 2.7002C8.17294 2.7002 9.01941 2.92231 9.83157 3.36655C10.6438 3.81078 11.3665 4.46367 11.9998 5.32522C12.6909 4.44317 13.4311 3.78515 14.2206 3.35117C15.01 2.91719 15.839 2.7002 16.7075 2.7002C18.1622 2.7002 19.3913 3.20018 20.3947 4.20015C21.3981 5.2001 21.8998 6.42767 21.8998 7.88287C21.8998 8.61272 21.7729 9.3407 21.519 10.0668C21.2652 10.7929 20.804 11.6036 20.1355 12.499C19.467 13.3945 18.5558 14.4273 17.4019 15.5975C16.2479 16.7678 14.7787 18.1815 12.9941 19.8386L11.9998 20.7617ZM11.9998 18.8078C13.6785 17.2698 15.0628 15.9533 16.1529 14.8583C17.2429 13.7634 18.104 12.8043 18.7362 11.9811C19.3684 11.1579 19.8104 10.4251 20.0623 9.7828C20.3143 9.14043 20.4402 8.50613 20.4402 7.8799C20.4402 6.81393 20.0893 5.92742 19.3874 5.22037C18.6854 4.51332 17.794 4.1598 16.7131 4.1598C15.8775 4.1598 15.0981 4.41845 14.3749 4.93575C13.6518 5.45306 13.0652 6.16749 12.6152 7.07902H11.3691C10.9229 6.17774 10.3342 5.46588 9.60282 4.94345C8.87147 4.42101 8.09938 4.1598 7.28655 4.1598C6.21208 4.1598 5.32229 4.51094 4.61717 5.21322C3.91204 5.91552 3.55947 6.8091 3.55947 7.89395C3.55947 8.51481 3.68595 9.14812 3.9389 9.79387C4.19185 10.4396 4.6364 11.172 5.27255 11.9909C5.9087 12.8099 6.76877 13.7681 7.85275 14.8655C8.93672 15.963 10.3191 17.2771 11.9998 18.8078Z" fill="white"/>
                                                  </svg>
                                              </button>
                                          {% endif %}
                                      </div>
                                  </div>
                              </div>
                                    {% endif %}
                                {% endfor %}

                            </div>
                            <nav class="story-nav">
                              <div class="story-thumb"></div>
                              <button class="story-prev">Previous</button>
                              <button class="story-next">Next</button>
                            </nav>
                          </div>
                    </div>
{% endfor %}
                </div>

            </div>
            <div class="location-map">
                <div id="map"></div>
            </div>
        </div>
    <div id="showmore-triger" data-page="1" data-max="{{ loc_count }}">
        <img src="{% static 'assets/images/loader.gif' %}">
    </div>
    </section>
    <div class="map_fullsize">
        <svg onclick='$(".map_fullsize").css("display", "none");' viewBox="0 -0.5 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M6.96967 16.4697C6.67678 16.7626 6.67678 17.2374 6.96967 17.5303C7.26256 17.8232 7.73744 17.8232 8.03033 17.5303L6.96967 16.4697ZM13.0303 12.5303C13.3232 12.2374 13.3232 11.7626 13.0303 11.4697C12.7374 11.1768 12.2626 11.1768 11.9697 11.4697L13.0303 12.5303ZM11.9697 11.4697C11.6768 11.7626 11.6768 12.2374 11.9697 12.5303C12.2626 12.8232 12.7374 12.8232 13.0303 12.5303L11.9697 11.4697ZM18.0303 7.53033C18.3232 7.23744 18.3232 6.76256 18.0303 6.46967C17.7374 6.17678 17.2626 6.17678 16.9697 6.46967L18.0303 7.53033ZM13.0303 11.4697C12.7374 11.1768 12.2626 11.1768 11.9697 11.4697C11.6768 11.7626 11.6768 12.2374 11.9697 12.5303L13.0303 11.4697ZM16.9697 17.5303C17.2626 17.8232 17.7374 17.8232 18.0303 17.5303C18.3232 17.2374 18.3232 16.7626 18.0303 16.4697L16.9697 17.5303ZM11.9697 12.5303C12.2626 12.8232 12.7374 12.8232 13.0303 12.5303C13.3232 12.2374 13.3232 11.7626 13.0303 11.4697L11.9697 12.5303ZM8.03033 6.46967C7.73744 6.17678 7.26256 6.17678 6.96967 6.46967C6.67678 6.76256 6.67678 7.23744 6.96967 7.53033L8.03033 6.46967ZM8.03033 17.5303L13.0303 12.5303L11.9697 11.4697L6.96967 16.4697L8.03033 17.5303ZM13.0303 12.5303L18.0303 7.53033L16.9697 6.46967L11.9697 11.4697L13.0303 12.5303ZM11.9697 12.5303L16.9697 17.5303L18.0303 16.4697L13.0303 11.4697L11.9697 12.5303ZM13.0303 11.4697L8.03033 6.46967L6.96967 7.53033L11.9697 12.5303L13.0303 11.4697Z" fill="#ffffff"></path> </g></svg>
        <div class="map_full" id="map_full">

        </div>
    </div>
     <footer class="white">
        <div class="footer container">
            <div class="footer-logo-geo">
                <a class="logo-footer" href="">#TAG</a>
                <button onclick="change_city_location(this)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.9938 21.5C11.8146 21.5 11.6375 21.4708 11.4625 21.4125C11.2875 21.3542 11.1333 21.2583 11 21.125C10.3 20.4917 9.54167 19.7625 8.725 18.9375C7.90833 18.1125 7.15 17.225 6.45 16.275C5.75 15.325 5.16667 14.3333 4.7 13.3C4.23333 12.2667 4 11.2333 4 10.2C4 7.7 4.80417 5.70833 6.4125 4.225C8.02083 2.74167 9.88333 2 12 2C14.1167 2 15.9792 2.74167 17.5875 4.225C19.1958 5.70833 20 7.7 20 10.2C20 11.2333 19.7667 12.2667 19.3 13.3C18.8333 14.3333 18.25 15.325 17.55 16.275C16.85 17.225 16.0917 18.1125 15.275 18.9375C14.4583 19.7625 13.7 20.4917 13 21.125C12.8667 21.2583 12.7104 21.3542 12.5313 21.4125C12.3521 21.4708 12.1729 21.5 11.9938 21.5ZM12.0022 11.75C12.4841 11.75 12.8958 11.5784 13.2375 11.2353C13.5792 10.8921 13.75 10.4796 13.75 9.99778C13.75 9.51593 13.5784 9.10417 13.2353 8.7625C12.8921 8.42083 12.4796 8.25 11.9978 8.25C11.5159 8.25 11.1042 8.42158 10.7625 8.76472C10.4208 9.10786 10.25 9.52036 10.25 10.0022C10.25 10.4841 10.4216 10.8958 10.7647 11.2375C11.1079 11.5792 11.5204 11.75 12.0022 11.75Z" fill="white"/>
                    </svg>
                    <span>{{ request.user.city }}</span>
                </button>
            </div>
            <div class="footer-center">
                <a href="">Политика конфиденциальности</a>
                <p>#TAG. 2023. Все права защищены</p>
            </div>
            <button id="scrollToTopButton">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.25 20V6.85L5.05 13.05L4 12L12 4L20 12L18.95 13.05L12.75 6.85V20H11.25Z" fill="white"/>
                </svg>  
                Наверх                
            </button>
        </div>
    </footer>
    <script src="{% static 'assets/js/jquery-1.10.2.min.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>
{% block js %}
    <script type="text/javascript">
    var map;

    DG.then(function () {
        map = DG.map('map', {
            {% if request.user.city == 'Москва' %}
                center: [55.755864, 37.617698],
            {% else %}
                center: [56.838011, 60.597474],
            {% endif %}
            zoom: 10
        });

        {% for i in object_list %}
            {% if i.latitude|length > 5 and i.longitude|length > 5 %}
            var marker_{{ i.pk }} = DG.marker([{{ i.latitude }}, {{ i.longitude }}]);
            marker_{{ i.pk }}.title = '{{ i.pk }}';
            marker_{{ i.pk }}.addTo(map);
            {% endif %}
        {% endfor %}

        var markersGroup = DG.featureGroup([{% for i in object_list %}{% if i.latitude|length > 5 and i.longitude|length > 5 %}marker_{{ i.pk }},{% endif %}{% endfor %}]);
	    markersGroup.addTo(map);

        markersGroup.on('click', function (e) {
            var clickedMarker = e.layer;
            var markerTitle = clickedMarker.title;
            window.open('/location/'+markerTitle, '_blank');
        });
    });






    const status_user = {% if request.user.status %}'free'{% else %}'status'{% endif %}
    {% for i in object_list %}
        const slide_{{ i.pk }} = new SlideStories("slide{{ i.pk }}");
    {% endfor %}




// Получаем все чекбоксы с классом "check_tags"
var checkboxes = document.querySelectorAll('.check_tags');

// Добавляем обработчик события на изменение состояния каждого чекбокса
checkboxes.forEach(function(checkbox) {
    checkbox.addEventListener('change', function() {
        // Получаем метку (label) для данного чекбокса
        var label = document.querySelector('label[for="' + checkbox.id + '"]');

        // Если чекбокс активен, добавляем класс "active" к метке
        if (checkbox.checked) {
            label.classList.add('active');
        } else {
            // Если чекбокс не активен, удаляем класс "active" у метки
            label.classList.remove('active');
        }
    });
});


</script>
<script>
const user_status = '{{ request.user.status }}'
function filtered() {
    const data = []
    {% for i in hashtag %}
        if (document.getElementById('btn_{{ i.pk }}').checked) { data.push('{{ i.title }}'); }
    {% endfor %}
    $('#showmore-triger').attr('data-page', 1);
    $.ajax({
		  url: '/ajax/filter_location/',
		  type: 'GET',
		  data: {
              'hashtag':data,
              'city': $("#city-select").val(),
              'page' : 1
          },
		  dataType: 'json',
		  success: function(response) {
              console.log(response)
              $('#locations_block').empty();
			  $('#locations_block').append(response.html);
              var arr = response.pk
              for (var i = 0; i < arr.length; i++) {
                  new SlideStories("slide"+arr[i]);
              }
              $('#showmore-triger').attr('data-max', response.count);

              $('.location-map').find('#map').remove()
              $('.location-map').append('<div id="map"></div>')
              $('.locations-items-title').text(response.len_max+" Локаций")


              DG.then(function () {
                  map = DG.map('map', {
                      {% if request.user.city == 'Москва' %}
                          center: [55.755864, 37.617698],
                      {% else %}
                          center: [56.838011, 60.597474],
                      {% endif %}
                      zoom: 10
                  });

                  var map_list = []

                  for (var i = 0; i < response.coordinates.length; i++) {
                      var coordinatePair = response.coordinates[i];
                      var marker = DG.marker([coordinatePair[0], coordinatePair[1]]);
                      marker.title = `${coordinatePair[2]}`;
                      marker.addTo(map);
                      map_list.push(marker)

                  }
                  var markersGroup = DG.featureGroup(map_list);
                  markersGroup.addTo(map);

                  markersGroup.on('click', function (e) {
                      var clickedMarker = e.layer;
                      var markerTitle = clickedMarker.title;
                      window.open('/location/'+markerTitle, '_blank');
                  });
              });

		  },
		  error: function(xhr, status, error) {
			  console.log(error);
		  }
        });
}
$('#locations-tags').find('input').on('change', function() {
    if (user_status == 'free') {
        $('#locations-tags').find('input').prop('disabled', true);
        filtered()
        $(this).addClass('active');
    } else {
        filtered()
        $(this).addClass('active');
    }
});

$('#city-select').on('change', function() {
    filtered()
});


var map_full;

function open_maps(lat, lon) {
    console.log(lat, lon)
    $('.map_fullsize').css('display', 'flex');

    if (map_full) {
        map_full.remove(); // Удалить предыдущую карту, если она существует
    }
    $('.map_fullsize #map_full').remove()
    $('.map_fullsize').append('<div class="map_full" id="map_full"></div>')

    DG.then(function () {
        map_full = DG.map('map_full', {
            center: [lat, lon],
            zoom: 14
        });
        DG.marker([lat, lon]).addTo(map_full);
    });
}

$(".map_fullsize").click(function(event) {
    if (!$(event.target).hasClass("map_full")) {
        $(".map_fullsize").css("display", "none");
    }
});
</script>
    <script>

    var block_show = false;

function scrollMore(){

	var $target = $('#showmore-triger');
	if (block_show) {
		return false;
	}
    if (Number($target.attr('data-page')) >= Number($target.attr('data-max'))) {
        return false;
    }


	var wt = $(window).scrollTop();
	var wh = $(window).height();
	var et = $target.offset().top;
	var eh = $target.outerHeight();
	var dh = $(document).height();

	if (wt + wh >= et || wh + wt == dh || eh + et < wh){
		var page = $target.attr('data-page');
        console.log(page)
		page++;
		block_show = true;

		const data = []
    {% for i in hashtag %}
        if (document.getElementById('btn_{{ i.pk }}').checked) { data.push('{{ i.title }}'); }
    {% endfor %}
    $.ajax({
		  url: '/ajax/filter_location/',
		  type: 'GET',
		  data: {
              'hashtag':data,
              'city': $("#city-select").val(),
              'page': page
          },
		  dataType: 'json',
        beforeSend: function() {
              $('#showmore-triger').css('display', 'flex');
              },
		  success: function(response) {
              $('#showmore-triger').css('display', 'none');
			  $('#locations_block').append(response.html);
              var arr = response.pk
              for (var i = 0; i < arr.length; i++) {
                  new SlideStories("slide"+arr[i]);
              }
              block_show = false;

		  },
		  error: function(xhr, status, error) {
			  console.log(error);
              $('#showmore-triger').css('display', 'none');
		  }
        });

		$target.attr('data-page', page);
	}
}

$(window).scroll(function(){
	scrollMore();
});

$(document).ready(function(){
	scrollMore();
});
    </script>
{% endblock %}
</body>
</html>